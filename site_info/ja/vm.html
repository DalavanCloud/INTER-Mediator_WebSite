<!DOCTYPE html>
<!--
/*
 * INTER-Mediator Ver.@@@@2@@@@ Released @@@@1@@@@
 *
 *   by Masayuki Nii  msyk@msyk.net Copyright (c) 2014 Masayuki Nii, All rights reserved.
 *
 *   This project started at the end of 2009.
 *   INTER-Mediator is supplied under MIT License.
 */
-->
<html>
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <link href="../lib/pagebuilder-r2.css" rel="stylesheet" media="screen"/>
    <link rel="shortcut icon" href="../images//im-icon.png" type="image/png"/>
    <link rel="icon" href="../images//im-icon.png" type="image/png"/>
    <title>INTER-Mediator</title>
    <script type="text/javascript" language="JavaScript" src="../lib/pagebuilder-r2.js"></script>
    <script type="text/javascript" language="JavaScript" src="../lib/pagebuilder-r2.php"></script>
    <style>
    </style>
</head>
<body>
<article>
<div style="border: solid 2px #4444BB;margin: 8px 300px 14px 40px;padding-bottom: 10px">
        <h1 style="border:none;font-size:16pt;">INTER-Mediatorがインストールされた動くサーバのVirtual Machine</h1>
        <p>INTER-Mediatorの試用や学習用に、即座にサーバとして利用できるVirtual Machineについての情報をこの文書に記載します。VMを自分で作成するか、あるいはすでに作成されているVMをダウンロードするかして利用できます。</p>
    </div>

    <h2>使用までの準備</h2>
    <p>VMは、VirtualBox用を提供します。アプリケーション形式のVirtualBoxを以下の方法で、ご自分のパソコンにインストールしておいてください。</p>

<h3>VirtualBoxのインストール</h3>
<p>Windows、Mac、Linux、Solarisで利用できるVirtual Machine実行環境の「VirtualBox」は、Oracle社が開発してフリーで配布しているものです。<a href="https://www.virtualbox.org/wiki/Downloads" target="_blank">こちらのページ</a>より、ご利用のホストコンピュータに対応したVirtualBoxをダウンロードしてご利用ください。</p>

    <h2>VMをの準備</h2>
    <p>VMをINTER-Mediatorに含まれているスクリプト等を利用して自分で生成する方法を「VMを自分で作成して起動する」に、一方、すでに誰かが作ったVMを利用する方法を「VMをダウンロードして利用する」に解説します。もちろん、いずれか一方の作業を行うことで、VMを利用することができるので、状況に応じて使い分けてください。</p>
    <h3>VMを自分で作成して起動する</h3>
<p>INTER-Mediatorの配布ファイルの中には、VMを生成するためのスクリプト等が含まれています。最新のINTER-Mediatorが組み込まれたVMを作成するには、この方法が最適です。</p>
<ol>
<li>Vagrantをインストールします。<a href="https://www.vagrantup.com/" target="_blank">こちら</a>のページに移動して、使用するOSに対応したアプリケーションをダウンロードしてインストールします。単にインストールするだけで大丈夫です。</li>
<li>INTER-Mediatorの最新版をcloneします。<a href="https://github.com/INTER-Mediator/INTER-Mediator" target="_blank">こちら</a>のページににある「Clone in Desktop」ボタンを利用するのが手軽な方法です。</li>
<li>OS XであればTerminalを起動し、cloneしたINTER-Mediatorフォルダ内のdist-docs/vm-for-trialフォルダに移動します。</li>
<li>Terminalで「vagrant up」というコマンドをを実行します。ダウンロードや作成処理に時間がかかります。概ね20分程度です。「INTER-Mediator-Server is ready.」と表示されたら準備完了です。</li>
</ol>

    <h3>VMをダウンロードして利用する</h3>
    <p>以下の手順は、VirtualBoxの初期状態を仮定しています。他の利用などでさまざまな設定がある場合には、手順が異なるかもしれませんが、原則として、ホストオンリーネットワークを用意して、そのネットワークを使用してVMが起動するようにセットアップされていればOKです。ただし、FileMaker Serverの場合には、VMとホスト側のIPアドレスが以下で行われる設定と同一である必要があります。</p>
<h4>VirtualBoxの準備</h4>
<p>VirtualBoxで稼働させるゲストのネットワーク環境にはいくつかありますが、「ホストオンリーネットワーク」を利用します。この方法だと、ゲストOS自体は、ホストマシン外からのネットワークアクセスはできなくなります。また、ゲストOSからホストOSへの接続も可能です。作成されるVMは、ホストオンリーネットワークであることを前提としているので、それ以外の設定での利用では、VMの状況を確認するなどして、ご自分で対処する必要があります。</p>
<p>Windowsでは、「ホストオンリーネットワーク」が最初から1つ作成されています。確認のため、「ファイル」メニューから「環境設定」を選択して、ダイアログボックスの左側で「ネットワーク」を選択し、「ホストオンリーネットワーク」のタブを選択します。そこに最初から「VirtualBox Host-Only Ethernet Adapter」が存在することを確認してください。</p>
<div class="picture">
    <img class="picture-small picture-dummy" src="../images/shot9518.png" />
</div>
<p>Mac版では、「ホストオンリーネットワーク」は最初は1つもありません。「VirtualBox」メニューの「環境設定」を選択してダイアログボックスを表示します。ツールバーにある「ネットワーク」を選択します。さらに、「ホストオンリーネットワーク」のタブを選択します。ここに何もない場合には、リストの右側の3つあるアイコンの一番上をクリックして、項目を1つ作ります。作成されたままの状態で通常はかまいません。</p>
<div class="picture">
    <img class="picture-small picture-dummy" src="../images/shot9515.png" />
</div>

<h4>INTER-Mediator-Serverのダウンロード</h4>
<p>INTER-Mediator-Serverは以下のリンクよりダウンロードしてください。1GBほどあります。</p>
<ul><li>
    <a href="/archives/INTER-Mediator-4.6-Server.ova">INTER-Mediator-4.6-Server</a>
</li></ul>

<h4>ダウンロードした.ovaファイルの読み込み</h4>
    <p>WindowsおよびMacのいずれの場合でも、「ファイル」メニューから「仮想アプライアンスのインポート」を選択してください。そして、ダウンロードしたファイルを指定して読み込み、「VirtualBoxマーネージャ」の画面の左側に新しい項目ができていることを確認します。</p>

<h4>INTER-Mediator-Serverのネットワーク設定</h4>
<p>「VirtualBoxマーネージャ」で、読み込んだINTER-Mediator-Serverの項目を選択します。そして、ツールバーの「設定」アイコンをクリックします。すると、そのVirtual Machineの設定が画面が表示されます。</p>
<p>Windowsでは、画面左側のリストで「ネットワーク」を選択します。右側で「アダプター1」が選択されていることを確認します。そして、「割り当て」のポップアップメニューで「ホストオンリーアダプター」を選択します。すると、「名前」のところは、自動的に、「ホストオンリーネットワーク」に定義された名前が見えています。そこまでを確認して、OKボタンをクリックします。</p>
<div class="picture">
    <img class="picture-small picture-dummy" src="../images/shot9517.png" />
</div>
<p>Macの場合は、ツールバーの「ネットワーク」を選択して、さらに「アダプター1」のタブを選択します。そして、。そして、「割り当て」のポップアップメニューで「ホストオンリーアダプター」を選択します。すると、「名前」のところは、自動的に、「ホストオンリーネットワーク」に定義された名前が見えています。そこまでを確認して、OKボタンをクリックします。</p>
<div class="picture">
    <img class="picture-small picture-dummy" src="../images/shot9516.png" />
</div>

<h2>INTER-Mediator-Serverの利用</h2>
<p style="background-color: #FFBBBB">作成したVirtual Machineは、特定のホスト内でのみ利用することを想定して、ログインアカウントなどを見える場所に記載しています。Virtual Machineとして配布している「INTER-Mediator-Server」は、そのままインターネットに公開することは、絶対に行わないでください。</p>
<p>以上の準備ができれば、VirtualBoxマネージャーでINTER-Mediator-Serverの項目を選択して「起動」ボタンをクリックします。黒いコンソール画面に文字が流れて起動します。ログインプロンプトが表示されます。Webブラウザから「<a href="http://192.168.56.101" target="_blank">http://192.168.56.101</a>」に接続してください。すると、このINTER-Mediator-Serverで利用出来る機能などなどが見えるページがあります。</p>
<p>「サンプルプログラム」のリンクからは、INTER-MediatorのSamplesフォルダの内容を即座に稼働させることができます。ホスト側でFileMaker Serverが稼働している場合、INTER-Mediatorのディストリビューションの中にあるdist-docs/TestDB.fmp12をサーバに登録してXML共有ができる状態になっていれば、ゲストからホストに接続して動作するので、FileMaker Serverのサンプルも試せます。FileMaker Serverが稼働していない場合には、FileMaker Serverのサンプルはエラーが出ます。</p>
    <div class="picture">
        <img class="picture-small picture-dummy" src="../images/shot9633.png" />
    </div>
    <p>また、Webブラウザ上で、定義ファイルとページファイルを修正して、実際にプログラムした結果を参照することもできます。たとえば、ページファイルのpage01.htmlを開くリンクだけでなく、page01.htmlを編集するリンクはHTMLエディタを表示します。また、def01.phpはpage01.htmlからSCRIPTタグで参照されている定義ファイルで、定義ファイルエディタを開いて修正もできるようになっています。</p>
    <div class="picture">
        <img class="picture-small picture-dummy" src="../images/shot9634.png" />
    </div>

<h3>「http://192.168.56.101」に接続できない場合</h3>
<p>INTER-Mediator-Serverが起動しているのなら、ユーザ名「developer」、パスワード「im4135dev」でログインをしてみて、「ifconfig」コマンドを実行してください。そこに、INTER-Mediator-Serverが現在使用しているIPアドレスが見えます。eth0と記述された塊の中の、inet addrの後のIPアドレスが、現在のゲストOSのIPアドレスです。ホスト側でWebブラウザを起動して、そのIPアドレスで接続をしてみてください。</p>
<p>それでも考えられるのは次のようなことです。</p>
<ul>
    <li>そもそも、VirtualBox自体がきちんと動かない状態である。VMwareで稼働するWindowsの上で、さらにINTER-Mediator-Serverを使用しようとしたなど。</li>
    <li>ここまでに説明したネットワークの設定が正しく行われていない。あるいは、以前にその種の設定を独自に変更してしまっている。</li>
    <li>なんらかの設定により、ホストからゲストへのIP接続ができない状態になっている。VirtualBoxでの設定次第で、あり得ると考えられます。</li>
</ul>

    <h3>自分で作ったファイルを運用する</h3>
    <p>「http://192.168.56.101」に接続したページに、ログイン可能なアカウントが末尾に書かれています。それをご利用ください。SFTPでファイルの転送をするのが手軽かと思われます。また、INTER-MEdiator-Server自体にログインをして、独自のデータベーススキーマを読み込ませるなどしてください。データベースの管理アカウントも、「http://192.168.56.101」に接続したページに記載しています。</p>

    <div></div>
    <div></div>
</article>
</body>
</html>